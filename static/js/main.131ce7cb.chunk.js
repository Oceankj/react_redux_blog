(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e(1),i=e.n(c),a=e(20),o=e.n(a),u=e(5),s=e(10),j=e(4),b="token",l=function(n){localStorage.setItem(b,n)},f=function(){return localStorage.getItem(b)},d="https://student-json-api.lidemy.me",x=function(n){return fetch("".concat(d,"/posts?_sort=createdAt&_order=desc&_page=").concat(n,"&_limit=10")).then((function(n){return n.json()}))},O=function(){var n=f();return fetch("".concat(d,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},p=Object(c.createContext)(null),h=e(2),v=e(3);function g(){var n=Object(h.a)(["\n  display: inline-flex;\n  font-size: 30px;\n  vertical-align: middle;\n  margin: 0px 27px 0px 0px;\n"]);return g=function(){return n},n}function m(){var n=Object(h.a)(["\n  padding: 5px;\n"]);return m=function(){return n},n}function y(){var n=Object(h.a)(["\n  display: flex;\n  align-items: center;\n"]);return y=function(){return n},n}function k(){var n=Object(h.a)(["\n  & + & {\n    margin-left: 10px;\n  }\n"]);return k=function(){return n},n}function w(){var n=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0px auto;\n  max-width: 1000px;\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  left: 0px;\n  background-color: white;\n  border-bottom: 1px solid black;\n"]);return w=function(){return n},n}var S=v.a.div(w()),C=Object(v.a)(s.b)(k()),z=v.a.div(y()),M=v.a.button(m()),_=v.a.p(g());function D(){var n=Object(c.useContext)(p),t=n.user,e=n.setUser,i=Object(j.f)(),a=Object(j.g)();return Object(r.jsxs)(S,{children:[Object(r.jsxs)(z,{children:[Object(r.jsx)(_,{children:"\u90e8\u843d\u683c"}),Object(r.jsx)(C,{to:"/",children:Object(r.jsx)(M,{children:"\u9996\u9801"})}),Object(r.jsx)(C,{to:"/about",children:Object(r.jsx)(M,{children:"\u95dc\u65bc\u6211"})}),t&&Object(r.jsx)(C,{to:"/new_post",children:Object(r.jsx)(M,{children:"\u65b0\u589e\u6587\u7ae0"})})]}),Object(r.jsxs)(z,{children:[!t&&Object(r.jsx)(C,{to:"/login",children:Object(r.jsx)(M,{children:"\u767b\u5165"})}),!t&&Object(r.jsx)(C,{to:"/registert",children:Object(r.jsx)(M,{children:"\u8a3b\u518a"})}),t&&Object(r.jsx)("div",{children:Object(r.jsx)(M,{onClick:function(){l(""),e(null),"/"!==a.pathname&&i.push("/")},children:"\u767b\u51fa"})})]})]})}function J(){return Object(r.jsx)(D,{})}function T(){var n=Object(h.a)(["\n  display: block;\n  margin: 30px 0px 0px auto;\n  padding: 5px 45px;\n"]);return T=function(){return n},n}function E(){var n=Object(h.a)(["\n  margin-top: 15px;\n  resize: none;\n"]);return E=function(){return n},n}function I(){var n=Object(h.a)(["\n  width: 292px;\n  height: 24px;\n"]);return I=function(){return n},n}function L(){var n=Object(h.a)(["\n  font-size: 20px;\n"]);return L=function(){return n},n}function P(){var n=Object(h.a)(["\n  display: block;\n  margin: 70px auto;\n  max-width: 1000px;\n"]);return P=function(){return n},n}var U=v.a.div(P()),A=v.a.p(L()),B=v.a.input(I()),N=v.a.textarea(E()),q=v.a.button(T());var F=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),s=o[0],b=o[1],l=Object(j.f)();return Object(r.jsx)(U,{children:Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:function(n){n.preventDefault(),function(n,t){var e=f();return fetch("".concat(d,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-Type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(){return l.push("/")})).catch((function(n){return console.log(n)}))},children:[Object(r.jsx)(A,{children:"\u65b0\u589e\u6587\u7ae0"}),Object(r.jsx)(B,{type:"text",placeholder:"\u8f38\u5165\u6a19\u984c",value:e,onChange:function(n){i(n.target.value)}}),Object(r.jsx)(N,{cols:"110",rows:"20",placeholder:"\u8f38\u5165\u5167\u5bb9",value:s,onChange:function(n){b(n.target.value)}}),Object(r.jsx)(q,{children:"\u9001\u51fa"})]})})})};function G(){return Object(r.jsx)(F,{})}function H(){var n=Object(h.a)(["\n  margin: 8px;\n  padding: 5px;\n  border-radius: 5px;\n  cursor: pointer;\n  :hover {\n    background: #8080808f;\n    color: white;\n  }\n"]);return H=function(){return n},n}function K(){var n=Object(h.a)(["\n  display: flex;\n  margin-top: 20px;\n  justify-content: center;\n"]);return K=function(){return n},n}function Q(){var n=Object(h.a)(["\n  display: flex;\n  margin: auto;\n  padding: 0px;\n  border-bottom: 1px solid #8080801f;\n  width: 918px;\n"]);return Q=function(){return n},n}function R(){var n=Object(h.a)(["\n  display: flex;\n"]);return R=function(){return n},n}function V(){var n=Object(h.a)(["\n  display: flex;\n"]);return V=function(){return n},n}function W(){var n=Object(h.a)(["\n  display: flex;\n  padding: 0px 40px;\n  align-items: flex-end;\n  justify-content: space-between;\n  border-radius: 5px;\n  cursor: pointer;\n  color: #555;\n  text-decoration: none;\n  :hover {\n    background-color: #80808047;\n  }\n"]);return W=function(){return n},n}function X(){var n=Object(h.a)(["\n  display: block;\n  margin: 60px auto;\n  max-width: 1000px;\n"]);return X=function(){return n},n}var Y=v.a.div(X()),Z=Object(v.a)(s.b)(W()),$=v.a.p(V()),nn=v.a.p(R()),tn=v.a.div(Q()),en=v.a.div(K()),rn=v.a.div(H());function cn(n){var t=n.post;return Object(r.jsxs)(Z,{to:"/article/".concat(t.id),children:[Object(r.jsx)(nn,{children:t.title}),Object(r.jsx)($,{children:new Date(t.createdAt).toLocaleString()})]})}var an=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)([]),o=Object(u.a)(a,2),s=o[0],j=o[1];return Object(c.useEffect)((function(){fetch("".concat(d,"/posts")).then((function(n){return n.json()})).then((function(n){for(var t=[],e=Math.ceil(n.length/10),r=1;r<=e;r+=1)t.push(r);j(t)})),x(1).then((function(n){console.log(n),i(n)}))}),[]),Object(r.jsxs)(Y,{children:[e.map((function(n){return Object(r.jsxs)("div",{children:[Object(r.jsx)(cn,{post:n}),Object(r.jsx)(tn,{})]},n.id)})),Object(r.jsx)(en,{children:s.map((function(n){return Object(r.jsx)(rn,{onClick:function(n){!function(n){x(n).then((function(n){console.log(n),i(n)}))}(n.target.innerText)},children:n},n)}))})]})};function on(){return Object(r.jsx)(an,{})}function un(){var n=Object(h.a)(["\n  color: red;\n  ","\n"]);return un=function(){return n},n}function sn(){var n=Object(h.a)(["\n  margin-top: 30px;\n"]);return sn=function(){return n},n}function jn(){var n=Object(h.a)(["\n  margin: 0px auto;\n  min-width: 400px;\n"]);return jn=function(){return n},n}function bn(){var n=Object(h.a)(["\n  display: flex;\n  text-align: center;\n"]);return bn=function(){return n},n}function ln(){var n=Object(h.a)([""]);return ln=function(){return n},n}function fn(){var n=Object(h.a)(["\n  display: block;\n  font-size: 30px;\n  text-align: center;\n"]);return fn=function(){return n},n}function dn(){var n=Object(h.a)(["\n  display: block;\n  justify-item: space-between;\n  margin-top: 100px;\n"]);return dn=function(){return n},n}var xn=v.a.div(dn()),On=v.a.p(fn()),pn=v.a.p(ln()),hn=v.a.div(bn()),vn=v.a.form(jn()),gn=v.a.button(sn()),mn=v.a.p(un(),(function(n){return n.errorMessage?"visiblity:visible;":"visiblity:hidden;"}));var yn=function(){var n=Object(c.useContext)(p).setUser,t=Object(c.useState)(""),e=Object(u.a)(t,2),i=e[0],a=e[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),b=s[0],f=s[1],x=Object(c.useState)("\u6b64\u70ba\u6e2c\u8a66\u7248\u672c\uff0c\u5bc6\u78bc\u7686\u70ba Lidemy"),h=Object(u.a)(x,2),v=h[0],g=h[1],m=Object(j.f)();return Object(r.jsxs)(xn,{children:[Object(r.jsx)(On,{children:"\u767b\u5165\u9801\u9762"}),Object(r.jsx)(hn,{children:Object(r.jsxs)(vn,{onSubmit:function(t){t.preventDefault(),function(n,t){return fetch("".concat(d,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,b).then((function(t){if(0===t.ok)return g(t.message);l(t.token),O().then((function(t){if(1!==t.ok)return l(null),g(t.toString());n(t.data),m.push("/")}))})),a(""),f("")},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(pn,{children:"username : "}),Object(r.jsx)("input",{type:"text",value:i,onChange:function(n){a(n.target.value)}}),Object(r.jsx)(pn,{children:"password : "}),Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){f(n.target.value)}})]}),Object(r.jsx)(gn,{children:"\u767b\u5165"}),Object(r.jsx)(mn,{errorMessage:v,children:v})]})})]})};function kn(){return Object(r.jsx)(yn,{})}function wn(){var n=Object(h.a)(["\n  color: red;\n\n  ","\n"]);return wn=function(){return n},n}function Sn(){var n=Object(h.a)(["\n  margin-right: 80px;\n  margin-left: 20px;\n"]);return Sn=function(){return n},n}function Cn(){var n=Object(h.a)(["\n  margin-top: 30px;\n"]);return Cn=function(){return n},n}function zn(){var n=Object(h.a)(["\n  margin: 0px auto;\n  min-width: 400px;\n"]);return zn=function(){return n},n}function Mn(){var n=Object(h.a)(["\n  display: flex;\n  text-align: right;\n"]);return Mn=function(){return n},n}function _n(){var n=Object(h.a)(["\n  display: block;\n  font-size: 30px;\n  text-align: center;\n"]);return _n=function(){return n},n}function Dn(){var n=Object(h.a)(["\n  display: inline-block;\n"]);return Dn=function(){return n},n}function Jn(){var n=Object(h.a)(["\n  display: block;\n  justify-item: space-between;\n  margin-top: 100px;\n"]);return Jn=function(){return n},n}var Tn=v.a.div(Jn()),En=v.a.p(Dn()),In=v.a.p(_n()),Ln=v.a.div(Mn()),Pn=v.a.form(zn()),Un=v.a.button(Cn()),An=v.a.input(Sn()),Bn=v.a.p(wn(),(function(n){return n.errorMessage?"visiblity:visible;":"visiblity:hidden;"}));var Nn=function(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),s=o[0],b=o[1],f=Object(c.useState)(""),x=Object(u.a)(f,2),h=x[0],v=x[1],g=Object(c.useState)(""),m=Object(u.a)(g,2),y=m[0],k=m[1],w=Object(c.useState)(""),S=Object(u.a)(w,2),C=S[0],z=S[1],M=Object(j.f)(),_=Object(c.useContext)(p).setUser;return Object(r.jsxs)(Tn,{children:[Object(r.jsx)(In,{children:"\u8a3b\u518a\u9801\u9762"}),Object(r.jsx)(Ln,{children:Object(r.jsxs)(Pn,{onSubmit:function(n){if(n.preventDefault(),z(""),h!==y)return z("plaese confirm your password");(function(n,t,e){return fetch("".concat(d,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))})(e,s,h).then((function(n){if(0===n.ok)return z(n.message);l(n.token),O().then((function(n){if(1!==n.ok)return l(null),z(n.toString());_(n.data),M.push("/")}))})).catch((function(n){console.log(n)}))},children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(En,{children:"nick name : "}),Object(r.jsx)(An,{type:"text",value:e,onChange:function(n){i(n.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)(En,{children:"user name : "}),Object(r.jsx)(An,{type:"text",value:s,onChange:function(n){b(n.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)(En,{children:"password : "}),Object(r.jsx)(An,{type:"password",value:h,onChange:function(n){v(n.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)(En,{children:"comfirm your password : "}),Object(r.jsx)(An,{type:"password",value:y,onChange:function(n){k(n.target.value)}})]})]}),Object(r.jsx)(Un,{children:"\u8a3b\u518a"}),Object(r.jsxs)(Bn,{errorMessage:C,children:[C," "]})]})})]})};function qn(){return Object(r.jsx)(Nn,{})}function Fn(){var n=Object(h.a)(["\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return Fn=function(){return n},n}function Gn(){var n=Object(h.a)(["\n  font-size: 25px;\n"]);return Gn=function(){return n},n}function Hn(){var n=Object(h.a)(["\n  display: block;\n  margin: 70px auto;\n  max-width: 1000px;\n"]);return Hn=function(){return n},n}var Kn=v.a.div(Hn()),Qn=v.a.p(Gn()),Rn=v.a.p(Fn());var Vn=function(){return Object(r.jsxs)(Kn,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(Qn,{children:"\u95dc\u65bc\u6211"})}),Object(r.jsx)(Rn,{children:"\u55e8\u55e8\u55e8\u55e8\u55e8\u55e8\u4f60\u597d\u554a"})]})};function Wn(){return Object(r.jsx)(Vn,{})}function Xn(){var n=Object(h.a)(["\n  word-break: break-all;\n  white-space: break-spaces;\n"]);return Xn=function(){return n},n}function Yn(){var n=Object(h.a)([""]);return Yn=function(){return n},n}function Zn(){var n=Object(h.a)(["\n  font-size: 20px;\n"]);return Zn=function(){return n},n}function $n(){var n=Object(h.a)(["\n  display: block;\n  margin: 70px auto;\n  max-width: 1000px;\n"]);return $n=function(){return n},n}var nt=v.a.div($n()),tt=v.a.p(Zn()),et=v.a.p(Yn()),rt=v.a.p(Xn());var ct=function(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(j.h)().id;return Object(c.useLayoutEffect)((function(){(function(n){return fetch("".concat(d,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){i(n)}))}),[]),Object(r.jsxs)(nt,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(tt,{children:e.length>0&&e[0].title}),Object(r.jsx)(et,{children:e.length>0&&new Date(e[0].createdAt).toLocaleString()})]}),Object(r.jsx)(rt,{children:e.length>0&&e[0].body})]})};function it(){return Object(r.jsx)(ct,{})}var at=function(){var n=Object(c.useState)(null),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&O().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)("div",{children:Object(r.jsx)(p.Provider,{value:{user:e,setUser:i},children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(J,{}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(on,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/login",children:Object(r.jsx)(kn,{})}),Object(r.jsx)(j.a,{path:"/new_post",children:Object(r.jsx)(G,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/registert",children:Object(r.jsx)(qn,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/about",children:Object(r.jsx)(Wn,{})}),Object(r.jsx)(j.a,{path:"/article/:id",children:Object(r.jsx)(it,{})})]})]})})})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(at,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.131ce7cb.chunk.js.map